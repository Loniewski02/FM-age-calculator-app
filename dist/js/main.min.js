"use strict";var allInputs=document.querySelectorAll("input"),dayInp=document.querySelector("#day"),monthInp=document.querySelector("#month"),yearInp=document.querySelector("#year"),calcBtn=document.querySelector(".calculator__line-btn"),yearParagraph=document.querySelector(".calculator__info-year span"),monthParagraph=document.querySelector(".calculator__info-month span"),dayParagraph=document.querySelector(".calculator__info-day span"),reg=/^\d+$/,today=new Date,monthsDaysArr=[31,28,31,30,31,30,31,31,30,31,30,31],monthsArr=["January","February","March","April","May","June","July","August","September","October","November","December"],showError=function(e,t){var e=e.parentElement,r=e.querySelector(".error-info");e.classList.add("error"),r.textContent=t},clearError=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showError(e,"This field is required"):clearError(e)})},checkDate=function(e,t){!e.value===reg.test(e.value)?showError(e,"Wrong format, numbers only"):Number(e.value)>t&&showError(e,"Must be a valid ".concat(e.previousElementSibling.innerText.toLowerCase()))},checkDay=function(e,t){checkDate(dayInp,31),(30===monthsDaysArr[t.value-1]&&30<e.value||28===monthsDaysArr[t.value-1]&&28<e.value)&&showError(e,"There are ".concat(monthsDaysArr[t.value-1]," days in ").concat(monthsArr[t.value-1]))},checkYear=function(e){!e.value===reg.test(e.value)?showError(e,"Wrong format, numbers only"):today-new Date(yearInp.value,monthInp.value-1,dayInp.value)<=0&&showError(e,"Must be in the past")},calculateAge=function(e,t,r){function a(){monthParagraph.textContent=s,++s<=u&&setTimeout(a,100)}function n(){dayParagraph.textContent=h,++h<=c&&setTimeout(n,100)}var e=new Date(e.value,t.value-1,r.value),o=Math.floor((today-e)/1e3/60/60/24/365.25),t=(console.log(o),new Date(today.getFullYear(),e.getMonth(),e.getDate())),r=(t.setFullYear(t.getFullYear()-1),today.getMonth()+12*today.getFullYear()-(t.getMonth()+12*t.getFullYear())),c=(r-=today.getDate()<t.getDate()?1:0,today.getDate()-t.getDate()),u=(c+=c<0?new Date(today.getFullYear(),today.getMonth(),0).getDate():0,r%12),l=(1<o&&(o+=Math.floor(r/12)),0),s=0,h=0;setTimeout(function e(){yearParagraph.textContent=l,++l<=o&&setTimeout(e,100)},100),setTimeout(a,200),setTimeout(n,300)},checkErrors=function(){var e=document.querySelectorAll(".calculator__data-box"),t=0;e.forEach(function(e){e.classList.contains("error")&&t++}),0===t&&calculateAge(yearInp,monthInp,dayInp)},main=function(){checkForm(allInputs),checkDay(dayInp,monthInp),checkDate(monthInp,12),checkYear(yearInp),checkErrors()},enterKeyCheck=function(e){"Enter"===e.key&&main()};calcBtn.addEventListener("click",function(){main()}),allInputs.forEach(function(e){return e.addEventListener("keyup",enterKeyCheck)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYWxsSW5wdXRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF5SW5wIiwicXVlcnlTZWxlY3RvciIsIm1vbnRoSW5wIiwiY2FsY0J0biIsInllYXJQYXJhZ3JhcGgiLCJtb250aFBhcmFncmFwaCIsInJlZyIsInRvZGF5IiwiRGF0ZSIsIm1vbnRoc0RheXNBcnIiLCJtb250aHNBcnIiLCJzaG93RXJyb3IiLCJpbnB1dCIsIm1zZyIsImNsZWFyRXJyb3IiLCJlbCIsInBhcmVudEVsZW1lbnQiLCJlcnJvck1zZyIsImRhdGVCb3giLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsIk51bWJlciIsInJlbW92ZSIsImNoZWNrRGF5IiwiY2hlY2tEYXRlIiwibWluIiwidmFsdWUiLCJ5ZWFySW5wIiwiY29uY2F0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImlubmVyVGV4dCIsInRvTG93ZXJDYXNlIiwiYWdlSW5ZZWFycyIsImZsb29yIiwibG9nIiwiYmlydGhEYXRlVGhpc1llYXIiLCJiaXJ0aERhdGUiLCJnZXRGdWxsWWVhciIsImFnZUluTW9udGhzIiwiZ2V0TW9udGgiLCJtb250aCIsImN1cnJlbnRZZWFyIiwiY3VycmVudE1vbnRoIiwieWVhciIsImRheSIsIm1haW4iLCJjaGVja0Zvcm0iLCJtb250aHNJblllYXIiLCJjaGVja1llYXIiLCJldmVudCIsImRheVBhcmFncmFwaCIsImN1cnJlbnREYXkiLCJhZ2VJbkRheXMiLCJhZGRFdmVudExpc3RlbmVyIiwiTWF0aCIsImNvbnNvbGUiLCJnZXREYXRlIiwidXBkYXRlTW9udGgiLCJ1cGRhdGVEYXkiLCJzZXRUaW1lb3V0IiwiY2hlY2tFcnJvcnMiLCJ1cGRhdGVZZWFyIiwiZXJyb3JDb3VudCIsImRhdGVCb3hlcyIsImZvckVhY2giLCJjb250YWlucyIsImNhbGN1bGF0ZUFnZSIsImVudGVyS2V5Q2hlY2siLCJrZXkiXSwibWFwcGluZ3Mi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LEVBQ3pCdUIsVUFBVXZCLFNBQVUsRUFBRSxFQUN0QitDLFVBQVVyQixPQUFPLEVBQ2pCaUMsWUFBVyxDQUNaLEVBRU1PLGNBQWdCLFNBQUFsQixHQUNILFVBQWRBLEVBQU1tQixLQUNUdkIsS0FBSSxDQUVOLEVBRUEzQyxRQUFRbUQsaUJBQWlCLFFBQVMsV0FDakNSLEtBQUksQ0FDTCxDQUFDLEVBRURqRCxVQUFVb0UsUUFBUSxTQUFBckQsR0FBSyxPQUFJQSxFQUFNMEMsaUJBQWlCLFFBQVNjLGFBQWEsQ0FBQyxDQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWxsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcclxuY29uc3QgZGF5SW5wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RheScpO1xyXG5jb25zdCBtb250aElucCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb250aCcpO1xyXG5jb25zdCB5ZWFySW5wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3llYXInKTtcclxuY29uc3QgY2FsY0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdG9yX19saW5lLWJ0bicpO1xyXG5cclxuY29uc3QgeWVhclBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdG9yX19pbmZvLXllYXIgc3BhbicpO1xyXG5jb25zdCBtb250aFBhcmFncmFwaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdG9yX19pbmZvLW1vbnRoIHNwYW4nKTtcclxuY29uc3QgZGF5UGFyYWdyYXBoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0b3JfX2luZm8tZGF5IHNwYW4nKTtcclxuXHJcbmNvbnN0IHJlZyA9IC9eXFxkKyQvO1xyXG5jb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbmNvbnN0IG1vbnRoc0RheXNBcnIgPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XHJcbmNvbnN0IG1vbnRoc0FyciA9IFtcclxuXHQnSmFudWFyeScsXHJcblx0J0ZlYnJ1YXJ5JyxcclxuXHQnTWFyY2gnLFxyXG5cdCdBcHJpbCcsXHJcblx0J01heScsXHJcblx0J0p1bmUnLFxyXG5cdCdKdWx5JyxcclxuXHQnQXVndXN0JyxcclxuXHQnU2VwdGVtYmVyJyxcclxuXHQnT2N0b2JlcicsXHJcblx0J05vdmVtYmVyJyxcclxuXHQnRGVjZW1iZXInLFxyXG5dO1xyXG5cclxuY29uc3Qgc2hvd0Vycm9yID0gKGlucHV0LCBtc2cpID0+IHtcclxuXHRjb25zdCBkYXRlQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBlcnJvck1zZyA9IGRhdGVCb3gucXVlcnlTZWxlY3RvcignLmVycm9yLWluZm8nKTtcclxuXHRkYXRlQm94LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSBtc2c7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVycm9yID0gaW5wdXQgPT4ge1xyXG5cdGNvbnN0IGRhdGVCb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGRhdGVCb3guY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IGlucHV0ID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKGVsID0+IHtcclxuXHRcdGlmIChlbC52YWx1ZSA9PT0gJycpIHtcclxuXHRcdFx0c2hvd0Vycm9yKGVsLCBgVGhpcyBmaWVsZCBpcyByZXF1aXJlZGApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnJvcihlbCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0RhdGUgPSAoaW5wdXQsIG1pbikgPT4ge1xyXG5cdGlmICghaW5wdXQudmFsdWUgPT09IHJlZy50ZXN0KGlucHV0LnZhbHVlKSkge1xyXG5cdFx0c2hvd0Vycm9yKGlucHV0LCBgV3JvbmcgZm9ybWF0LCBudW1iZXJzIG9ubHlgKTtcclxuXHR9IGVsc2UgaWYgKE51bWJlcihpbnB1dC52YWx1ZSkgPiBtaW4pIHtcclxuXHRcdHNob3dFcnJvcihpbnB1dCwgYE11c3QgYmUgYSB2YWxpZCAke2lucHV0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCl9YCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tEYXkgPSAoaW5wdXQsIG1vbnRoKSA9PiB7XHJcblx0Y2hlY2tEYXRlKGRheUlucCwgMzEpO1xyXG5cdGlmIChtb250aHNEYXlzQXJyW21vbnRoLnZhbHVlIC0gMV0gPT09IDMwICYmIGlucHV0LnZhbHVlID4gMzApIHtcclxuXHRcdHNob3dFcnJvcihpbnB1dCwgYFRoZXJlIGFyZSAke21vbnRoc0RheXNBcnJbbW9udGgudmFsdWUgLSAxXX0gZGF5cyBpbiAke21vbnRoc0Fyclttb250aC52YWx1ZSAtIDFdfWApO1xyXG5cdH0gZWxzZSBpZiAobW9udGhzRGF5c0Fyclttb250aC52YWx1ZSAtIDFdID09PSAyOCAmJiBpbnB1dC52YWx1ZSA+IDI4KSB7XHJcblx0XHRzaG93RXJyb3IoaW5wdXQsIGBUaGVyZSBhcmUgJHttb250aHNEYXlzQXJyW21vbnRoLnZhbHVlIC0gMV19IGRheXMgaW4gJHttb250aHNBcnJbbW9udGgudmFsdWUgLSAxXX1gKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja1llYXIgPSBpbnB1dCA9PiB7XHJcblx0aWYgKCFpbnB1dC52YWx1ZSA9PT0gcmVnLnRlc3QoaW5wdXQudmFsdWUpKSB7XHJcblx0XHRzaG93RXJyb3IoaW5wdXQsIGBXcm9uZyBmb3JtYXQsIG51bWJlcnMgb25seWApO1xyXG5cdH0gZWxzZSBpZiAodG9kYXkgLSBuZXcgRGF0ZSh5ZWFySW5wLnZhbHVlLCBtb250aElucC52YWx1ZSAtIDEsIGRheUlucC52YWx1ZSkgPD0gMCkge1xyXG5cdFx0c2hvd0Vycm9yKGlucHV0LCAnTXVzdCBiZSBpbiB0aGUgcGFzdCcpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNhbGN1bGF0ZUFnZSA9ICh5ZWFyLCBtb250aCwgZGF5KSA9PiB7XHJcblx0Y29uc3QgYmlydGhEYXRlID0gbmV3IERhdGUoeWVhci52YWx1ZSwgbW9udGgudmFsdWUgLSAxLCBkYXkudmFsdWUpO1xyXG5cclxuXHRsZXQgYWdlSW5NaWxsaXNlY29uZHMgPSB0b2RheSAtIGJpcnRoRGF0ZTtcclxuXHRsZXQgYWdlSW5ZZWFycyA9IE1hdGguZmxvb3IoYWdlSW5NaWxsaXNlY29uZHMgLyAxMDAwIC8gNjAgLyA2MCAvIDI0IC8gMzY1LjI1KTtcclxuXHJcblx0Y29uc29sZS5sb2coYWdlSW5ZZWFycyk7XHJcblxyXG5cdGNvbnN0IGJpcnRoRGF0ZVRoaXNZZWFyID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgYmlydGhEYXRlLmdldE1vbnRoKCksIGJpcnRoRGF0ZS5nZXREYXRlKCkpO1xyXG5cdGJpcnRoRGF0ZVRoaXNZZWFyLnNldEZ1bGxZZWFyKGJpcnRoRGF0ZVRoaXNZZWFyLmdldEZ1bGxZZWFyKCkgLSAxKTtcclxuXHJcblx0bGV0IGFnZUluTW9udGhzID1cclxuXHRcdHRvZGF5LmdldE1vbnRoKCkgKyAxMiAqIHRvZGF5LmdldEZ1bGxZZWFyKCkgLSAoYmlydGhEYXRlVGhpc1llYXIuZ2V0TW9udGgoKSArIDEyICogYmlydGhEYXRlVGhpc1llYXIuZ2V0RnVsbFllYXIoKSk7XHJcblx0YWdlSW5Nb250aHMgLT0gdG9kYXkuZ2V0RGF0ZSgpIDwgYmlydGhEYXRlVGhpc1llYXIuZ2V0RGF0ZSgpID8gMSA6IDA7XHJcblxyXG5cdGxldCBhZ2VJbkRheXMgPSB0b2RheS5nZXREYXRlKCkgLSBiaXJ0aERhdGVUaGlzWWVhci5nZXREYXRlKCk7XHJcblx0YWdlSW5EYXlzICs9IGFnZUluRGF5cyA8IDAgPyBuZXcgRGF0ZSh0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpLCAwKS5nZXREYXRlKCkgOiAwO1xyXG5cclxuXHRjb25zdCBtb250aHNJblllYXIgPSBhZ2VJbk1vbnRocyAlIDEyO1xyXG5cdGlmIChhZ2VJblllYXJzID4gMSkge1xyXG5cdFx0YWdlSW5ZZWFycyArPSBNYXRoLmZsb29yKGFnZUluTW9udGhzIC8gMTIpO1xyXG5cdH1cclxuXHJcblx0bGV0IGN1cnJlbnRZZWFyID0gMDtcclxuXHRsZXQgY3VycmVudE1vbnRoID0gMDtcclxuXHRsZXQgY3VycmVudERheSA9IDA7XHJcblxyXG5cdGNvbnN0IHVwZGF0ZVllYXIgPSAoKSA9PiB7XHJcblx0XHR5ZWFyUGFyYWdyYXBoLnRleHRDb250ZW50ID0gY3VycmVudFllYXI7XHJcblx0XHRjdXJyZW50WWVhcisrO1xyXG5cdFx0aWYgKGN1cnJlbnRZZWFyIDw9IGFnZUluWWVhcnMpIHtcclxuXHRcdFx0c2V0VGltZW91dCh1cGRhdGVZZWFyLCAxMDApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHVwZGF0ZU1vbnRoID0gKCkgPT4ge1xyXG5cdFx0bW9udGhQYXJhZ3JhcGgudGV4dENvbnRlbnQgPSBjdXJyZW50TW9udGg7XHJcblx0XHRjdXJyZW50TW9udGgrKztcclxuXHRcdGlmIChjdXJyZW50TW9udGggPD0gbW9udGhzSW5ZZWFyKSB7XHJcblx0XHRcdHNldFRpbWVvdXQodXBkYXRlTW9udGgsIDEwMCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgdXBkYXRlRGF5ID0gKCkgPT4ge1xyXG5cdFx0ZGF5UGFyYWdyYXBoLnRleHRDb250ZW50ID0gY3VycmVudERheTtcclxuXHRcdGN1cnJlbnREYXkrKztcclxuXHRcdGlmIChjdXJyZW50RGF5IDw9IGFnZUluRGF5cykge1xyXG5cdFx0XHRzZXRUaW1lb3V0KHVwZGF0ZURheSwgMTAwKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRzZXRUaW1lb3V0KHVwZGF0ZVllYXIsIDEwMCk7XHJcblx0c2V0VGltZW91dCh1cGRhdGVNb250aCwgMjAwKTtcclxuXHRzZXRUaW1lb3V0KHVwZGF0ZURheSwgMzAwKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRXJyb3JzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGRhdGVCb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjdWxhdG9yX19kYXRhLWJveCcpO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHRkYXRlQm94ZXMuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlcnJvcicpKSB7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYgKGVycm9yQ291bnQgPT09IDApIHtcclxuXHRcdGNhbGN1bGF0ZUFnZSh5ZWFySW5wLCBtb250aElucCwgZGF5SW5wKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBtYWluID0gKCkgPT4ge1xyXG5cdGNoZWNrRm9ybShhbGxJbnB1dHMpO1xyXG5cdGNoZWNrRGF5KGRheUlucCwgbW9udGhJbnApO1xyXG5cdGNoZWNrRGF0ZShtb250aElucCwgMTIpO1xyXG5cdGNoZWNrWWVhcih5ZWFySW5wKTtcclxuXHRjaGVja0Vycm9ycygpO1xyXG59O1xyXG5cclxuY29uc3QgZW50ZXJLZXlDaGVjayA9IGV2ZW50ID0+IHtcclxuXHRpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRtYWluKCk7XHJcblx0fVxyXG59O1xyXG5cclxuY2FsY0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRtYWluKCk7XHJcbn0pO1xyXG5cclxuYWxsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4gaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUNoZWNrKSk7XHJcbiJdfQ==
